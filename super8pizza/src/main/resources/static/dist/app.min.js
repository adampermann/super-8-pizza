!function(){angular.module("Super8PizzaApp",["ngRoute","order","orderManagement","inventoryListing","account","toastr","ngCookies"])}(),function(){"use-strict";var e=angular.module("Super8PizzaApp");e.config(["$locationProvider","$routeProvider","$httpProvider",function(e,r,t){e.html5Mode(!0),r.when("/",{templateUrl:"js/home/home.template.html"}).when("/ordering",{template:"<ordering></ordering>"}).when("/order/summary",{template:"<order-summary></order-summary>"}).when("/order/listing",{template:"<order-listing></order-listing>"}).when("/order/history",{template:"<order-history></order-history>"}).when("/inventory/listing",{template:"<inventory-listing></inventory-listing>"}).when("/order/custom",{template:"<custom-order></custom-order>"}).when("/login",{controller:"NavigationController",templateUrl:"js/home/login.template.html",controllerAs:"$ctrl"}).when("/register",{controller:"NavigationController",templateUrl:"js/home/register.template.html",controllerAs:"$ctrl"}).when("/account",{template:"<account></account>"}).otherwise("/")}]).config(function(e){angular.extend(e,{autoDismiss:!1,containerId:"toast-container",maxOpened:0,newestOnTop:!0,positionClass:"toast-top-center",preventDuplicates:!1,preventOpenDuplicates:!1,target:"body"})}).service("Session",["$cookies",function(e){var r=this;r.create=function(r){var t={user:r};e.putObject("user",t)},r.destroy=function(){e.putObject("user",null)},r.getCurrentUser=function(){var r=e.getObject("user");return null==r||void 0===r?null:r.user}}])}(),function(){"use-strict";function e(e,r,t,n,o,a){function i(){r.get("/getCompleteOrders").then(function(e){s.orders=e.data},function(e){a.error(e.data.message,"Error")})}var s=this;s.user=e.user,s.orders=[],s.confirmPass=e.user.password,s.updateAccount=function(){void 0===s.user.email||void 0===s.user.password||void 0===s.user.username||void 0===s.confirmPass?a.error("Please enter all required fields!","Error"):0==s.user.email.length||0==s.user.username.length||0==s.user.password.length||0==s.confirmPass.length?a.error("Please enter all required fields!","Error"):s.confirmPass!=s.user.password?a.error("Password and confirm password don't match","Error"):r.post("/updateAccount",s.user).then(function(r){var t=r.data;200==r.status?(e.user=t,e.displayName=t.username,e.authenticated=!0,2==e.user.role.id&&(e.isAdmin=!0),n.create(e.user),a.success("Account updated successfully!","Error")):a.error("Error updating account","Error")},function(e){a.error(e.data.message,"Error")})},s.cancelUpdate=function(){t.url("/")},s.orderAgain=function(e){o.setCart(e.orderItems),t.url("/ordering")},i()}var r=angular.module("account",[]);r.component("account",{templateUrl:"js/home/account.template.html",controller:"AccountController"}),r.controller("AccountController",e),e.$inject=["$rootScope","$http","$location","Session","orderingService","toastr"]}(),function(){"use-strict";function e(e,r,t,n,o,a){function i(e,t){r.post("/login",e).then(function(e){200==e.status?u(e.data):l(e.data.message),t&&t()},function(e){l(e.data.message),t&&t()})}function s(){e.isAdmin?t.url("/order/listing"):t.url("/")}function u(r){e.user=r,e.displayName=r.username,e.authenticated=!0,2==e.user.role.id&&(e.isAdmin=!0),n.create(e.user)}function l(r){e.authenticated=!1,e.isAdmin=!1,e.displayName="",a.error(r,"Error")}function c(){var r=n.getCurrentUser();null!=r&&i(r,function(){e.authenticated&&t.url("/")})}var d=this;d.user={username:"",password:"",email:"",joinKey:"",role:{},userId:"",address:{}},d.confirmPass="",e.user={},e.authenticated=!1,e.isAdmin=!1,d.login=function(){void 0===d.user.username||void 0===d.user.password?a.error("Please enter all required fields!","Error"):0==d.user.username.length||0==d.user.password.length?a.error("Please enter all required fields!","Error"):i(d.user,function(){e.authenticated?s():t.url("/login")})},d.register=function(){void 0===d.user.email||void 0===d.user.password||void 0===d.user.username||void 0===d.confirmPass?a.error("Please enter all required fields!","Error"):0==d.user.email.length||0==d.user.username.length||0==d.user.password.length||0==d.confirmPass.length?a.error("Please enter all required fields!","Error"):d.confirmPass!=d.user.password?a.error("Password and confirm password don't match","Error"):r.post("/register",d.user).then(function(e){200==e.status?(u(e.data),s()):l(e.data.message)},function(e){l(e.data.message)})},d.logout=function(){e.displayName="",e.authenticated=!1,e.isAdmin=!1,n.destroy(),o.clearCart(),o.clearOrder(),o.clearCustomPizza(),a.info("Successfully logged out","Info"),t.url("/")},c()}var r=angular.module("Super8PizzaApp");r.controller("NavigationController",e),e.$inject=["$rootScope","$http","$location","Session","orderingService","toastr"]}(),function(){"use-strict";function e(e,r,t,n){function o(){i.crusts=r("filter")(i.inventory,i.isCrust),i.cheeses=r("filter")(i.inventory,i.isCheese),i.toppings=r("filter")(i.inventory,i.isTopping),i.sauces=r("filter")(i.inventory,i.isSauce)}function a(){e.get("/getInventory").then(function(e){i.inventory=e.data,console.log(i.inventory),o()},function(){n.error("Error retrieving inventory from server","Error")})}var i=this;i.inventory=[],i.customInventory=[],i.crusts=[],i.cheeses=[],i.toppings=[],i.sauces=[],i.calculatePrice=function(){for(var e=10,r=0;r<i.customInventory.length;++r)e+=1;return e},i.addToOrder=function(){var e={id:"",imageURL:"images/customize-pizza.png",includedItems:i.customInventory,price:i.calculatePrice(),name:"Custom Pizza",quantity:1,enabled:!0};t.setCustomPizza(e),$location.url("/ordering")},i.addItemToCustomInventory=function(e){var r=i.itemInCustomInventory(e);if(null!=r)r.quantity+=1;else{var t=angular.copy(e);t.quantity=1,i.customInventory.push(t)}},i.itemInCustomInventory=function(e){for(var r=0;r<i.customInventory.length;++r)if(i.customInventory[r].name==e.name)return i.customInventory[r];return null},i.isCrust=function(e){return 1==e.type.id},i.isCheese=function(e){return 2==e.type.id},i.isTopping=function(e){return 3==e.type.id},i.isSauce=function(e){return 4==e.type.id},a()}var r=angular.module("order");r.component("customOrder",{templateUrl:"js/order/order.custom.template.html",controller:"CustomOrderController"}),r.controller("CustomOrderController",e),e.$inject=["$http","$filter","orderingService","toastr"]}(),function(){"use-strict";angular.module("order",[])}(),function(){"use-strict";function e(e,r,t,n){function o(){a.order=n.getOrder(),a.address=a.order.address;var r=new Date(a.order.timestamp);a.order.readyTime=r.addHours(1).toLocaleTimeString("en-US"),a.calculateOrderTotal(),e.get("/getDeliveryOptions").then(function(e){a.deliveryOptions=e.data}),e.get("/getPaymentOptions").then(function(e){a.paymentOptions=e.data})}var a=this;a.title="Order Summary",a.order={},a.address={},a.orderTotal=0,a.deliveryOptions=[],a.paymentOptions=[],a.isDelivery=function(){return 1==a.order.orderType.id},a.getFormattedAddress=function(){return a.address.street+" "+a.address.city+" "+a.address.state+", "+a.address.zip},a.calculateOrderTotal=function(){for(var e=0,r=0;r<a.order.orderItems.length;++r)e+=a.order.orderItems[r].price*a.order.orderItems[r].quantity;a.orderTotal=t("currency")(e,"$",2)},a.confirmOrder=function(){n.clearOrder(),r.url("/")},a.getDeliveryMethodName=function(){for(var e=0;e<a.deliveryOptions.length;++e)if(a.deliveryOptions[e].id==a.order.orderType.id)return a.deliveryOptions[e].name},a.getPayMethodName=function(){for(var e=0;e<a.paymentOptions.length;++e)if(a.paymentOptions[e].id==a.order.paymentMethod.id)return a.paymentOptions[e].name},Date.prototype.addHours=function(e){return this.setTime(this.getTime()+60*e*60*1e3),this},o()}var r=angular.module("order");r.component("orderSummary",{templateUrl:"js/order/order.summary.template.html",controller:"OrderSummaryController"}),r.controller("OrderSummaryController",e),e.$inject=["$http","$location","$filter","orderingService"]}(),function(){"use-strict";function e(e,r,t,n,o,a){function i(){var e={orderId:"",orderNumber:0,userId:"Guest User",timestamp:Date.now(),orderType:{id:u.deliveryOption,name:u.getDeliveryMethodName()},paymentMethod:{id:u.payOption,name:u.getPayMethodName()},orderStatus:{id:1,name:"Placed"},cardNumber:u.cardNumber,address:{street:u.street,city:u.city,state:u.state,zip:u.zip},orderItems:u.cart,price:u.calculateCartTotal()};return e}function s(){r.get("/getMenu").then(function(e){u.menu=e.data,console.log(u.menu)}),r.get("/getDeliveryOptions").then(function(e){u.deliveryOptions=e.data}),r.get("/getPaymentOptions").then(function(e){u.paymentOptions=e.data});var t=o.getCart(),n=o.getCustomPizza();if(null!=n&&u.cart.push(n),null!=t?(u.cart=t,u.calculateCartTotal()):u.cart=[],e.authenticated){var a=e.user.address;angular.equals({},a)||(u.street=null==a.street?"":a.street,u.city=null==a.city?"":a.city,u.state=null==a.state?"":a.state,u.zip=null==a.zip?"":a.zip)}}var u=this;u.cart=[],u.menu=[],u.cartTotal=t("currency")(0,"$",2),u.deliveryOption=0,u.payOption=0,u.paymentOptions=[],u.deliveryOptions=[],u.cardNumber="",u.street="",u.city="",u.state="",u.zip="",u.addToCart=function(e){if(u.isOptionInCart(e))for(var r=0;r<u.cart.length;++r)u.cart[r].name==e.name&&(u.cart[r].quantity+=e.quantity);else u.cart.push(angular.copy(e));e.quantity=1,u.calculateCartTotal()},u.isOptionInCart=function(e){for(var r=0;r<u.cart.length;++r)if(u.cart[r].name==e.name&&"Custom Pizza"!=e.name)return!0;return!1},u.calculateCartTotal=function(){for(var e=0,r=0;r<u.cart.length;++r)e+=u.cart[r].price*u.cart[r].quantity;u.cartTotal=t("currency")(e,"$",2)},u.clearCart=function(){u.cart=[],u.calculateCartTotal()},u.isOrderValid=function(){var e=!0;return 1==u.deliveryOption?""!=u.street&&""!=u.city&&""!=u.state&&""!=u.zip||(e=!1):0==u.deliveryOption&&(e=!1),2==u.payOption&&""==u.cardNumber?e=!1:0==u.payOption&&(e=!1),0==u.cart.length&&(e=!1),e},u.getDeliveryMethodName=function(){for(var e=0;e<u.deliveryOptions.length;++e)if(u.deliveryOptions[e].id==u.deliveryOption)return u.deliveryOptions[e].name},u.getPayMethodName=function(){for(var e=0;e<u.paymentOptions.length;++e)if(u.paymentOptions[e].id==u.payOption)return u.paymentOptions[e].name},u.customizePizza=function(){o.setCart(u.cart),n.url("/order/custom")},u.placeOrder=function(){var e=i();r.post("/placeOrder",e).then(function(e){200==e.status?(o.setOrder(e.data),o.clearCart(),o.clearCustomPizza(),a.success("Order Placed","Success!"),n.url("/order/summary")):a.error("Error placing order","Error")},function(e){a.error(e.data.message,"Error")})},s()}var r=angular.module("order");r.component("ordering",{templateUrl:"js/order/ordering.template.html",controller:"OrderingController"}),r.controller("OrderingController",e),e.$inject=["$rootScope","$http","$filter","$location","orderingService","toastr"]}(),function(){"use-strict";function e(){var e=this;e.order=null,e.cart=null,e.customPizza=null,e.setCustomPizza=function(r){e.customPizza=r},e.getCustomPizza=function(){return e.customPizza},e.clearCustomPizza=function(){e.customPizza=null},e.setCart=function(r){e.cart=r},e.getCart=function(){return e.cart},e.clearCart=function(){e.cart=null},e.setOrder=function(r){e.order=r},e.getOrder=function(){return e.order},e.clearOrder=function(){e.order=null}}var r=angular.module("Super8PizzaApp");r.service("orderingService",e),e.$inject=[]}(),function(){"use-strict";function e(e){function r(){e.get("/getCompleteOrders").then(function(e){t.completedOrders=e.data})}var t=this;t.completedOrders=[],t.filterBy="",r()}var r=angular.module("orderManagement");r.component("orderHistory",{templateUrl:"js/order_management/order.history.template.html",controller:"OrderHistoryController"}),r.controller("OrderHistoryController",e),e.$inject=["$http"]}(),function(){"use-strict";function e(e,r){function t(){n.getOpenOrders(),e.get("/getOrderStatusOptions").then(function(e){n.statuses=e.data})}var n=this;n.orders=[],n.statuses=[],n.filterBy="",n.setStatus=function(t){e.post("/setOrderStatus",t).then(function(e){200==e.status?(r.success("Updated order "+t.orderNumber+" to "+t.orderStatus.name,"Success!"),n.getOpenOrders()):r.error("Error updating order status","Error")})},n.getOpenOrders=function(){e.get("/getOpenOrders").then(function(e){n.orders=e.data})},t()}var r=angular.module("orderManagement");r.component("orderListing",{templateUrl:"js/order_management/order.listing.template.html",controller:"OrderListingController"}),r.controller("OrderListingController",e),e.$inject=["$http","toastr"]}(),function(){"use-strict";angular.module("orderManagement",[])}(),function(){"use-strict";function e(e,r){function t(){}t()}var r=angular.module("inventoryListing",[]);r.component("inventoryListing",{templateUrl:"js/inventory_management/inventory.listing.template.html",controller:"InventoryListingController"}),r.controller("InventoryListingController",e),e.$inject=["$http","$filter"]}();